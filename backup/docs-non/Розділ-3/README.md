# ВИКОРИСТАННЯ KUBERNETES КЛАСТЕРУ ДЛЯ ЕФЕКТИВНОГО УПРАЛІННЯ РЕСУРСАМИ СТАЦІОНАРНИХ І МОБІЛЬНИХ ПРИСТРОЇВ ТА ПРИСТРОЇВ ІНТЕРНЕТУ РЕЧЕЙ

## Архітектура та основні компоненти Kubernetes кластеру

Kubernetes - це портативна, розширювана платформа з відкритим вихідним кодом для управління контейнерними робочими елементами (робочими навантаженнями) та сервісами, що полегшує декларативну конфігурацію та автоматизацію. Kubernetes допомагає керувати контейнерами, що запускають застосунок, і слідкувати, щоб не було збоїв у роботі. Для цього ПЗ надається фреймворк для запуску розподілених систем без перебоїв.

## Компоненти K8s

![components](https://d33wubrfki0l68.cloudfront.net/7016517375d10c702489167e704dcb99e570df85/7bb53/images/docs/components-of-kubernetes.png)

## Централізоване оновлення програмного забезпечення

Для реалізації гнучкого та динамічного налаштування програмного забезпечення на елементах кластерної системи, було прийнято рішення про використання додаткового інструменту Ansible.
Ansible - це програмне забезпечення, що надає засоби для управління конфігурацією, оркестровки, централізованої установки застосунків і паралельного виконання типових завдань на групі систем або елементів.

![ansible](https://miro.medium.com/max/875/1*v7l8J0w2u7L__B7zDKzpqQ.png)

## Розгортання експериментального макету на основі Kubernetes кластеру

### Ініціалізація гетерогенного кластеру

Експериментальний макет містить один головний вузол, два робочі вузли та додатковий сервер керування (control server) з встановленим програмним забезпеченням Ansible, що допомагає поширювати команди на елементи кластеру централізовано.

![kubernetes-init](https://miro.medium.com/max/1151/1*vxtANihbv7dgnkJ2ioPSxw.png)

### Розгортання моніторингової системи

Kubernetes кластер оперує власними маніфестами у форматі yaml. Система реалізує декларативний підхід до налаштування оточення. Це означає, що користувачу необхідно лише вказати що розгорнути та скільки копій. Також можна вказати додаткові параметри (обмеження по пам'яті, спільні файлові системи тощо), які будуть визначати даний екземпляр, але цього достатньо для початкового налаштування.

![Prometheus](https://assets.balena.io/blog-common/archive/2019/05/node-exporter.png)

## Імітація критичних ситуацій та тестування імітаційної корпоративної системи.

![chaos-kubernetes](https://blog.flant.com/wp-content/uploads/sites/2/2021/03/flant-chaos-engineering.png)

Варто зазначити, що розгортання додаткових контейнерів не займає одразу усі доступні ресурси. Аплікація має певні межі у використанні cpu/memory, які ми самі можемо задати. При цьому, ресурси будуть виділятися поступово, а не статично. Динамічний розподіл ресурсів є **значною перевагою контейнерів над віртуальними машинами**, оскільки це вбудована особливість і керується хостовою операційною системою, на відміну від ВМ.

![chaos-kubernetes-overloaded](https://miro.medium.com/max/1400/0*Qn9oEBL7bQ_ZYO1B)

## Висновок

Kunernetes кластер може здатися досить складно на перший погляд технологію. На початку розділу 3 було наведено основні його компоненти, кожен з яких виконує свою конкретну роль у системі. Проте, перевага ПЗ Kubernetes полягає у тому, що більшість складних процесів, що відбуваються на найнижчому рівні огорнуті в декілька рядів абстракцій, що дозволяє у досить швидкий термін опанувати технологію та працювати з нею. Даний підхід дозволяє за необхідності дуже точно налаштувати кожен аспект системи. Проте, у більшості випадків Kubernetes надає ряд готових конфігурацій, які задовольняють базові потреби інженерів, які проектують систему.

Експериментальна система надає змогу зручно налаштовувати системи моніторингу, такі як Prometheus/Grafana, та систему управляння Ansible для кластера. Якщо ви можете запустити свою програму у контейнеризованому середовищі, отже вона буде сумісна з Kubernetes також.

Конфігураційні файли та маніфести Ansible необхідно вдосконалювати, щоб враховувати більше ймовірних сценарії розгортання, проте навіть таке першочергове налаштування, яке наведено у розділі 3, полегшує процес розгортання програмного забезпечення та приєднання нових вузлів у кластер.

Об'єкт дослідження, а саме Kubernetes кластер, дозволяє абстрагуватися від різного програмного та апаратного забезпечення пристроїв. У дипломній роботі це досягнуто за допомогою об'єднання операційних систем Ubuntu та Raspbian. Важливо зазначити, що було продемонстровано можливість використання пристроїв інтернету речей як вузлів розподіленої обчислювальної системи у Kubernetes кластері.

Шляхом ручного знищування подів я довів декларативний підхід Kubernetes, а саме, що необхідно тільки вказати параметри системи, а саме ПЗ забезпечення буде намагатися тримати оточення у близькому до описаного стану. Таким чином, проведені тести, по критичним збоям у функціонуванні аплікації відображають слідуючий за ним процес відновлення аплікацій.

Наостанок, перевагою створеної системи є те, що ресурси обчислювальних вузлів розподіляються динамічно. Це дозволяє одночасно використовувати комп'ютерний пристрій у стаціонарних задачах, так і одночасно розгортати контейнеризовані додатки для прикладних програм.